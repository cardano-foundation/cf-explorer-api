var jsonData = pm.response.json();
var jsonDataRequest = JSON.parse(pm.request.body.raw);

//Check status code 
pm.test("Status code name has string", function () {
    pm.response.to.have.status("Bad Request");
    pm.environment.set("type_native_script", jsonData.type);
    pm.environment.set("keyHash_native_script", jsonData.keyHash);
    pm.environment.set("scripts_native_script", JSON.stringify(jsonData.scripts));
});

pm.test("Successful POST request", function () {
    pm.expect(pm.response.code).to.be.oneOf([200, 400]);
});

pm.test("Response time is less than 5000ms", function () {
    pm.expect(pm.response.responseTime).to.be.below(5000);
});

// pm.test("response should be okay to process", function () {
//     pm.response.to.not.be.error;
//     pm.expect(jsonData.type).to.eql(jsonDataRequest.type);
//     if (jsonData.scripts) {
//         pm.expect(JSON.stringify(jsonData.scripts)).to.eql(JSON.stringify(jsonDataRequest.scripts))
//     }
//     if (jsonData.keyHash) {
//         pm.expect(jsonData.keyHash).to.eql(jsonDataRequest.keyHash)
//     }
// });

//check format data type 
// pm.test("Check data type of the response", () => {
//     pm.expect(jsonData.type).to.be.a("string");
//     if (jsonData.keyHash) {
//         pm.expect(jsonData.keyHash).to.be.a("string");
//     }
//     if (jsonData.scripts) {
//         (jsonData.scripts || []).map(script => {
//             if (script.type) {
//                 pm.expect(script.type).to.be.a('string')
//             }
//             if (script.keyHash) {
//                 pm.expect(script.keyHash).to.be.a('string')
//             }
//             if (script.slot) {
//                 pm.expect(script.slot).to.be.a('number')
//             }
//         })
//     }
// });